# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ButtonAccess —Å –ø—Ä–æ–¥–∞–∫—à–Ω

## üéØ –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è?

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –º–æ–¥—É–ª—è `material_requests` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ **ButtonAccess** (–º–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞) –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω–æ–π –∏ –ø—Ä–æ–¥–∞–∫—à–Ω –≤–µ—Ä—Å–∏–µ–π, —á—Ç–æ–±—ã:
- –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `material-requests`
- –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π
- –£–±—Ä–∞—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ `/admin/core/buttonaccess/`

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
cd /Users/kairatkhidirboev/Projects/checksite
./sync_button_access.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –£–¥–∞–ª–∏—Ç –∑–∞–ø–∏—Å–∏ `material-requests`
2. ‚úÖ –û—á–∏—Å—Ç–∏—Ç —Ç–∞–±–ª–∏—Ü—É `core_button_access`
3. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞
4. ‚úÖ –ü–æ–∫–∞–∂–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

---

## üåê –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ü–†–û–î–ê–ö–®–ù —Å–µ—Ä–≤–µ—Ä–æ–º

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞

–ù–∞ **–ª–æ–∫–∞–ª—å–Ω–æ–π** –º–∞—à–∏–Ω–µ —Ñ–∞–π–ª —ç–∫—Å–ø–æ—Ä—Ç–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω:
```
/Users/kairatkhidirboev/Projects/checksite/button_access_export.sql
```

### –®–∞–≥ 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
scp button_access_export.sql kayrat1509@194.34.232.112:~/checksite/
```

### –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh kayrat1509@194.34.232.112
cd ~/checksite
```

### –®–∞–≥ 4: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã **–ø–æ –ø–æ—Ä—è–¥–∫—É**:

```bash
# 1. –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å–∏ material-requests
docker compose exec db psql -U checksite_user -d checksite_db -c "DELETE FROM core_button_access WHERE page = 'material-requests';"

# 2. –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É (—É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏)
docker compose exec db psql -U checksite_user -d checksite_db -c "TRUNCATE TABLE core_button_access RESTART IDENTITY CASCADE;"

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
docker compose exec -T db psql -U checksite_user -d checksite_db < button_access_export.sql

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
docker compose exec db psql -U checksite_user -d checksite_db -c "SELECT COUNT(*) FROM core_button_access;"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `92` –∑–∞–ø–∏—Å–∏

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ backend

```bash
docker compose restart backend
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://admin.stroyka.asia/admin/core/buttonaccess/
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- ‚ùå –ù–µ—Ç –∑–∞–ø–∏—Å–µ–π –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `material-requests`
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç (dashboard, projects, issues, contractors, supervisions, users, reports, settings, profile, recycle-bin, tenders, warehouse)

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ButtonAccess –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ |
|----------|-------------------|
| contractors | 13 |
| dashboard | 4 |
| issues | 13 |
| profile | 1 |
| projects | 10 |
| recycle-bin | 1 |
| reports | 5 |
| settings | 3 |
| supervisions | 13 |
| tenders | 14 |
| users | 14 |
| warehouse | 1 |
| **–ò–¢–û–ì–û** | **92 –∑–∞–ø–∏—Å–∏** |

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ ButtonAccess:
```bash
docker compose exec db psql -U checksite_user -d checksite_db -c "SELECT DISTINCT page, COUNT(*) as buttons FROM core_button_access GROUP BY page ORDER BY page;"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ material-requests:
```bash
docker compose exec db psql -U checksite_user -d checksite_db -c "SELECT * FROM core_button_access WHERE page = 'material-requests';"
```
*–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 0 rows*

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
```bash
docker compose exec db psql -U checksite_user -d checksite_db -c "SELECT button_key, button_name FROM core_button_access WHERE page = 'projects' ORDER BY button_key;"
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–µ—Ä–µ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –ë–î:
   ```bash
   docker compose exec db pg_dump -U checksite_user checksite_db > backup_$(date +%Y%m%d_%H%M%S).sql
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `core_button_access` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ª–æ–∫–∞–ª—å–Ω–æ–π:
   ```bash
   docker compose exec db psql -U checksite_user -d checksite_db -c "\d core_button_access"
   ```

3. **–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π**: –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞:
   ```bash
   docker compose exec -T db psql -U checksite_user -d checksite_db < backup_YYYYMMDD_HHMMSS.sql
   ```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

- [ ] –°–æ–∑–¥–∞–Ω —ç–∫—Å–ø–æ—Ä—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î (`button_access_export.sql`)
- [ ] –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä
- [ ] –°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î
- [ ] –£–¥–∞–ª–µ–Ω—ã –∑–∞–ø–∏—Å–∏ `material-requests` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
- [ ] –û—á–∏—â–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `core_button_access` –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
- [ ] –ó–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç–∫—Å–ø–æ—Ä—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 92)
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω backend
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∞–¥–º–∏–Ω–∫–∞ `/admin/core/buttonaccess/`
- [ ] –£–±–µ–¥–∏–ª–∏—Å—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `material-requests` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend: `docker compose logs backend --tail 50`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î: `\d core_button_access`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ –±—ç–∫–∞–ø–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
