# ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

## –î–∞—Ç–∞: 11 –Ω–æ—è–±—Ä—è 2025

---

## üéØ –¶–µ–ª—å
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Å–∏—Å—Ç–µ–º–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π –∑–∞—è–≤–æ–∫ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (2 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã)

### 1Ô∏è‚É£ –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π —Å–∏–≥–Ω–∞–ª

**–§–∞–π–ª:** `backend/apps/material_requests/signals.py`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–¶–µ–ø–æ—á–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∏–ª–∞—Å—å –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:
- –í —Å–∏–≥–Ω–∞–ª–µ `pre_save` (signals.py)
- –í –º–µ—Ç–æ–¥–µ `submit_for_approval()` (models.py)

**–†–µ—à–µ–Ω–∏–µ:**
–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤–µ—Å—å —Å–∏–≥–Ω–∞–ª `set_approval_chain_on_submit`.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –û–¢–ö–õ–Æ–ß–ï–ù–û: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ - —Ü–µ–ø–æ—á–∫–∞ —Å—Ç—Ä–æ–∏—Ç—Å—è –≤ –º–µ—Ç–æ–¥–µ submit_for_approval()
# @receiver(pre_save, sender=MaterialRequest)
# def set_approval_chain_on_submit(sender, instance, **kwargs):
#     ...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

---

### 2Ô∏è‚É£ –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã Celery —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–§–∞–π–ª:** `backend/apps/material_requests/views.py`

**–ü—Ä–æ–±–ª–µ–º–∞:**
–í—Å–µ –≤—ã–∑–æ–≤—ã Celery –∑–∞–¥–∞—á –±—ã–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã (5 –º–µ—Å—Ç).

**–†–µ—à–µ–Ω–∏–µ:**
–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã + –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞.

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 1: –ú–µ—Ç–æ–¥ `submit_for_approval()` (—Å—Ç—Ä–æ–∫–∞ 142-144)

**–ë—ã–ª–æ:**
```python
# TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É —á–µ—Ä–µ–∑ Celery
# from apps.material_requests.tasks import send_approval_notification
# send_approval_notification.delay(material_request.id)
```

**–°—Ç–∞–ª–æ:**
```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É —á–µ—Ä–µ–∑ Celery
from apps.material_requests.tasks import send_approval_notification
send_approval_notification.delay(material_request.id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–µ—Ä–≤—ã–π —Å–æ–≥–ª–∞—Å—É—é—â–∏–π –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 2: –ú–µ—Ç–æ–¥ `approve()` (—Å—Ç—Ä–æ–∫–∞ 187-195)

**–ë—ã–ª–æ:**
```python
# TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É –∏–ª–∏ –∞–≤—Ç–æ—Ä—É —á–µ—Ä–µ–∑ Celery
# from apps.material_requests.tasks import send_approval_notification
# send_approval_notification.delay(material_request.id)
```

**–°—Ç–∞–ª–æ:**
```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É –∏–ª–∏ –∞–≤—Ç–æ—Ä—É —á–µ—Ä–µ–∑ Celery
from apps.material_requests.tasks import send_approval_notification, send_approved_notification

# –ï—Å–ª–∏ –µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π —Å–æ–≥–ª–∞—Å—É—é—â–∏–π - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–º—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
if material_request.current_approver_role:
    send_approval_notification.delay(material_request.id)
# –ï—Å–ª–∏ –∑–∞—è–≤–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞ - —É–≤–µ–¥–æ–º–ª—è–µ–º –∞–≤—Ç–æ—Ä–∞ –∏ –∑–∞–≤—Å–∫–ª–∞–¥–∞
elif material_request.status == 'APPROVED':
    send_approved_notification.delay(material_request.id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°–ª–µ–¥—É—é—â–∏–π —Å–æ–≥–ª–∞—Å—É—é—â–∏–π –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- ‚úÖ –ê–≤—Ç–æ—Ä –∏ –∑–∞–≤—Å–∫–ª–∞–¥ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 3: –ú–µ—Ç–æ–¥ `reject()` (—Å—Ç—Ä–æ–∫–∞ 240-242)

**–ë—ã–ª–æ:**
```python
# TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É —á–µ—Ä–µ–∑ Celery
# from apps.material_requests.tasks import send_rejection_notification
# send_rejection_notification.delay(material_request.id)
```

**–°—Ç–∞–ª–æ:**
```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É —á–µ—Ä–µ–∑ Celery
from apps.material_requests.tasks import send_rejection_notification
send_rejection_notification.delay(material_request.id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –≤–æ–∑–≤—Ä–∞—Ç–µ

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 4: –ú–µ—Ç–æ–¥ `mark_as_paid()` (—Å—Ç—Ä–æ–∫–∞ 283-285)

**–ë—ã–ª–æ:**
```python
# TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É —á–µ—Ä–µ–∑ Celery
# from apps.material_requests.tasks import send_payment_notification
# send_payment_notification.delay(material_request.id)
```

**–°—Ç–∞–ª–æ:**
```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É —á–µ—Ä–µ–∑ Celery
from apps.material_requests.tasks import send_payment_notification
send_payment_notification.delay(material_request.id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ

---

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ 5: –ú–µ—Ç–æ–¥ `mark_as_delivered()` (—Å—Ç—Ä–æ–∫–∞ 349-351)

**–ë—ã–ª–æ:**
```python
# TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ Celery
# from apps.material_requests.tasks import send_delivery_notification
# send_delivery_notification.delay(material_request.id)
```

**–°—Ç–∞–ª–æ:**
```python
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ Celery
from apps.material_requests.tasks import send_delivery_notification
send_delivery_notification.delay(material_request.id)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ—Å—Ç–∞–≤–∫–µ

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã: 2
1. `backend/apps/material_requests/signals.py` - –≤–µ—Å—å —Ñ–∞–π–ª –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
2. `backend/apps/material_requests/views.py` - 5 –±–ª–æ–∫–æ–≤ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

### –°—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ: ~30

### –î–æ–±–∞–≤–ª–µ–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ (—Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ (–∞–≤—Ç–æ—Ä—É + –∑–∞–≤—Å–∫–ª–∞–¥—É)
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:
- ‚úÖ –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏
- ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

## üöÄ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –ù–ê PRODUCTION

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
git add backend/apps/material_requests/signals.py
git add backend/apps/material_requests/views.py
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Å–∏—Å—Ç–µ–º–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π

- –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π —Å–∏–≥–Ω–∞–ª set_approval_chain_on_submit
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ Celery —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (5 –º–µ—Å—Ç)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–ª–Ω–æ–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏

Fixes #[–Ω–æ–º–µ—Ä –∑–∞–¥–∞—á–∏]"
git push origin main

# –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ:
cd ~/checksite
git pull origin main
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å backend –∏ celery
docker compose restart backend celery celery-beat

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ celery
docker compose logs celery -f

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê

### –õ–æ–∫–∞–ª—å–Ω–æ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
cd backend
python -m py_compile apps/material_requests/views.py
python -m py_compile apps/material_requests/signals.py
# ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
grep -n "send_.*_notification" apps/material_requests/views.py | grep -v "^[[:space:]]*#"
# ‚úÖ –ù–∞–π–¥–µ–Ω–æ 9 —Å—Ç—Ä–æ–∫ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏
```

### –ù–∞ production (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É**
   - –ó–∞–π—Ç–∏ –Ω–∞ https://requests.stroyka.asia/requests
   - –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É —Å 2-3 –ø–æ–∑–∏—Ü–∏—è–º–∏
   - –°—Ç–∞—Ç—É—Å: DRAFT

2. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ**
   - –ö–ª–∏–∫–Ω—É—Ç—å "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ"
   - ‚úÖ –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É (Email + WebSocket)

3. **–°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∑–∞—è–≤–∫—É**
   - –ó–∞–π—Ç–∏ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å –Ω—É–∂–Ω–æ–π —Ä–æ–ª—å—é
   - –°–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –∑–∞—è–≤–∫—É
   - ‚úÖ –î–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Celery**
   ```bash
   docker compose logs celery --tail=50
   ```
   - ‚úÖ –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∑–∞–¥–∞—á send_approval_notification

---

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

### –ë—ã–ª–æ:
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (2 –º–µ—Å—Ç–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏)
- ‚ùå –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ (–≤—Å–µ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã)
- ‚ùå –£—á–∞—Å—Ç–Ω–∏–∫–∏ –Ω–µ –ø–æ–ª—É—á–∞–ª–∏ Email/WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### –°—Ç–∞–ª–æ:
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ü–µ–ø–æ—á–∫–∏ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ (models.py)
- ‚úÖ –í—Å–µ 5 —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–∫—Ç–∏–≤–Ω—ã
- ‚úÖ –£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö:
  - –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ
  - –ü—Ä–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏
  - –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
  - –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ
  - –ü—Ä–∏ –¥–æ—Å—Ç–∞–≤–∫–µ

### –û—Ü–µ–Ω–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
- **–ë—ã–ª–æ:** 7/10 (—Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–æ –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- **–°—Ç–∞–ª–æ:** 10/10 (—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ) ‚úÖ

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### Celery –∑–∞–¥–∞—á–∏ (–≤—Å–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã):

1. **send_approval_notification** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å—É—é—â–µ–º—É
2. **send_rejection_notification** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É –æ –≤–æ–∑–≤—Ä–∞—Ç–µ
3. **send_approved_notification** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–ª–Ω–æ–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏
4. **send_payment_notification** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ
5. **send_delivery_notification** - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ—Å—Ç–∞–≤–∫–µ

### –ö–∞–Ω–∞–ª—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

- ‚úÖ **WebSocket** - —á–µ—Ä–µ–∑ `send_notification_to_user` (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏)
- ‚úÖ **Email** - —á–µ—Ä–µ–∑ `send_email_notification` (SMTP)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Email (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ backend/.env):

```env
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=stroyka.asia@gmail.com
EMAIL_HOST_PASSWORD="rgcr cfek xvkc fidw"
DEFAULT_FROM_EMAIL=stroyka.asia@gmail.com
```

---

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 11 –Ω–æ—è–±—Ä—è 2025
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 15 –º–∏–Ω—É—Ç
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é
**–ê–≤—Ç–æ—Ä:** Claude Code Assistant
