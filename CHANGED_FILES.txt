# ========================================
# –°–ü–ò–°–û–ö –ò–ó–ú–ï–ù–Å–ù–ù–´–• –§–ê–ô–õ–û–í –î–õ–Ø –î–ï–ü–õ–û–Ø
# –ú–æ–¥—É–ª—å: –ó–∞—è–≤–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
# –î–∞—Ç–∞: 11 –Ω–æ—è–±—Ä—è 2025
# ========================================

## üÜï –ù–û–í–´–ï –§–ê–ô–õ–´ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ production)

### Backend - –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ material_requests
backend/apps/material_requests/__init__.py
backend/apps/material_requests/admin.py
backend/apps/material_requests/apps.py
backend/apps/material_requests/models.py
backend/apps/material_requests/serializers.py
backend/apps/material_requests/signals.py
backend/apps/material_requests/tasks.py
backend/apps/material_requests/urls.py
backend/apps/material_requests/views.py
backend/apps/material_requests/migrations/__init__.py
backend/apps/material_requests/migrations/0001_initial.py  ‚ö†Ô∏è –í–ê–ñ–ù–û!

### Frontend-requests - –Ω–æ–≤—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
frontend-requests/src/api/axios.ts
frontend-requests/src/api/materialRequests.ts
frontend-requests/src/api/buttonAccess.ts
frontend-requests/src/pages/MaterialRequests.tsx
frontend-requests/src/App.tsx
frontend-requests/src/main.tsx
frontend-requests/.env
frontend-requests/vite.config.ts
frontend-requests/package.json
frontend-requests/Dockerfile
frontend-requests/index.html
frontend-requests/tsconfig.json
frontend-requests/tsconfig.app.json
frontend-requests/tsconfig.node.json
frontend-requests/.gitignore

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–µ–ø–ª–æ—è
DEPLOY_MATERIAL_REQUESTS.md  ‚ö†Ô∏è –ü–†–û–ß–ò–¢–ê–¢–¨ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!
README_DEPLOY.md
deploy_material_requests.sh  ‚ö†Ô∏è –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è
CHANGED_FILES.txt  (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

## üîÑ –ò–ó–ú–ï–ù–Å–ù–ù–´–ï –§–ê–ô–õ–´ (–Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ production)

### Backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
backend/config/settings.py  ‚ö†Ô∏è –í–ê–ñ–ù–û! –ü—Ä–æ–≤–µ—Ä–∏—Ç—å INSTALLED_APPS
backend/config/urls.py  ‚ö†Ô∏è –í–ê–ñ–ù–û! –ü—Ä–æ–≤–µ—Ä–∏—Ç—å urlpatterns
backend/.env  ‚ö†Ô∏è –í–ê–ñ–ù–û! –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ALLOWED_HOSTS –∏ CORS_ALLOWED_ORIGINS

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
nginx/conf.d/default.conf  ‚ö†Ô∏è –í–ê–ñ–ù–û! –î–æ–±–∞–≤–ª–µ–Ω—ã server blocks –¥–ª—è admin.stroyka.asia –∏ requests.stroyka.asia

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
docker-compose.yml  ‚ö†Ô∏è –î–æ–±–∞–≤–ª–µ–Ω —Å–µ—Ä–≤–∏—Å frontend-requests

## ‚öôÔ∏è –§–ê–ô–õ–´, –ö–û–¢–û–†–´–ï –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨/–û–ë–ù–û–í–ò–¢–¨

1. backend/config/settings.py
   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:
   - 'apps.material_requests' –≤ INSTALLED_APPS

2. backend/config/urls.py
   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:
   - path('api/material-requests/', include('apps.material_requests.urls'))

3. backend/.env
   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä–æ–∫–∏:
   - ALLOWED_HOSTS=localhost,127.0.0.1,backend,checksite_backend,stroyka.asia,admin.stroyka.asia,requests.stroyka.asia
   - CORS_ALLOWED_ORIGINS=https://stroyka.asia,https://requests.stroyka.asia,https://admin.stroyka.asia

4. nginx/conf.d/default.conf
   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ server blocks:
   - server_name requests.stroyka.asia (—Å—Ç—Ä–æ–∫–∏ 75-135)
   - server_name admin.stroyka.asia (—Å—Ç—Ä–æ–∫–∏ 137-194)

5. docker-compose.yml
   –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ:
   - –°–µ—Ä–≤–∏—Å frontend-requests (–ø–æ—Ä—Ç 5175)

## üì¶ –ú–ò–ì–†–ê–¶–ò–ò

‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!

–§–∞–π–ª: backend/apps/material_requests/migrations/0001_initial.py

–≠—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã:
- material_requests
- material_request_items

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞ production:
```bash
docker compose run --rm backend python manage.py migrate material_requests
```

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

1. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
   ```bash
   docker compose exec backend python manage.py showmigrations material_requests
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: [X] 0001_initial
   ```

2. –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã:
   ```bash
   docker compose exec db psql -U checksite_user -d checksite_db -c "\dt material_*"
   # –î–æ–ª–∂–Ω—ã –±—ã—Ç—å: material_requests, material_request_items
   ```

3. API —Ä–∞–±–æ—Ç–∞–µ—Ç:
   ```bash
   curl https://admin.stroyka.asia/api/material-requests/requests/
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON (–∏–ª–∏ 401 –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è auth)
   ```

4. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
   –û—Ç–∫—Ä—ã—Ç—å: https://admin.stroyka.asia/admin/material_requests/materialrequest/
   ‚ùå –ù–ï –î–û–õ–ñ–ù–û –±—ã—Ç—å –æ—à–∏–±–∫–∏: "relation 'material_request_items' does not exist"

5. Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç:
   –û—Ç–∫—Ä—ã—Ç—å: https://requests.stroyka.asia/requests
   ‚úÖ –î–æ–ª–∂–Ω–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π –∑–∞—è–≤–æ–∫

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –î–ï–ü–õ–û–ï–ú

- [ ] –í—Å–µ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ production —Å–µ—Ä–≤–µ—Ä
- [ ] backend/config/settings.py –æ–±–Ω–æ–≤–ª—ë–Ω (INSTALLED_APPS)
- [ ] backend/config/urls.py –æ–±–Ω–æ–≤–ª—ë–Ω (urlpatterns)
- [ ] backend/.env –æ–±–Ω–æ–≤–ª—ë–Ω (ALLOWED_HOSTS, CORS_ALLOWED_ORIGINS)
- [ ] nginx/conf.d/default.conf –æ–±–Ω–æ–≤–ª—ë–Ω (server blocks)
- [ ] docker-compose.yml –æ–±–Ω–æ–≤–ª—ë–Ω (frontend-requests)
- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω —Ñ–∞–π–ª DEPLOY_MATERIAL_REQUESTS.md
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω backup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
- [ ] –ì–æ—Ç–æ–≤ –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫)

## üöÄ –ö–û–ú–ê–ù–î–´ –î–õ–Ø –î–ï–ü–õ–û–Ø

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
./deploy_material_requests.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backend
docker compose stop backend

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose run --rm backend python manage.py migrate material_requests

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å frontend-requests
docker compose build frontend-requests

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker compose up -d backend nginx celery celery-beat frontend-requests

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps
```

## üéØ –ò–¢–û–ì–û

–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤: ~25
–ò–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤: ~5
–ù–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ –ë–î: 2
–ù–æ–≤—ã—Ö API endpoints: 8
–ù–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü frontend: 1

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ production –¥–µ–ø–ª–æ—é! ‚úÖ

========================================
