# üì∏ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ WebP

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç **WebP** –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –≤—Ö–æ–¥–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
- ‚úÖ **JPEG / JPG** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **PNG** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
- ‚úÖ **HEIC / HEIF** - —Ñ–æ—Ä–º–∞—Ç Apple (iPhone/iPad)
- ‚úÖ **BMP** - —Ä–∞—Å—Ç—Ä–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è Windows
- ‚úÖ **TIFF** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **WebP** - —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:
- üé® **–ö–∞—á–µ—Å—Ç–≤–æ**: 85% (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–∑–º–µ—Ä–æ–º –∏ –∫–∞—á–µ—Å—Ç–≤–æ–º)
- üìè **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä**: 2560px –ø–æ —à–∏—Ä–∏–Ω–µ –∏–ª–∏ –≤—ã—Å–æ—Ç–µ
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞**: –î–∞ (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π)
- üìê **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ EXIF –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏**: –î–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç)
- üóúÔ∏è **–ú–µ—Ç–æ–¥ —Å–∂–∞—Ç–∏—è**: 6 (–Ω–∞–∏–≤—ã—Å—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- üé≠ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏**: –ó–∞–º–µ–Ω–∞ –Ω–∞ –±–µ–ª—ã–π —Ñ–æ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îî‚îÄ‚îÄ issues/
‚îÇ       ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª—å IssuePhoto —Å –∞–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ serializers.py     # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ       ‚îú‚îÄ‚îÄ utils.py           # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ views.py           # API endpoints –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Pillow, pillow-heif)
‚îî‚îÄ‚îÄ test_image_conversion.py   # –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
```

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

```python
# requirements.txt
Pillow==10.4.0           # –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
pillow-heif==0.18.0      # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HEIC/HEIF —Ñ–æ—Ä–º–∞—Ç–æ–≤
```

---

## ÔøΩÔøΩ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ API

```http
POST /api/issues/{issue_id}/upload_photo/
Content-Type: multipart/form-data

photo: <binary_file>
stage: BEFORE | AFTER
```

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ (serializers.py)

```python
def validate_photo(self, value):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞"""
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–∏—Ç –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç 50 –ú–ë
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ (models.py)

```python
def save(self, *args, **kwargs):
    """–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ save –º–æ–¥–µ–ª–∏ IssuePhoto"""
    if self.photo and hasattr(self.photo, 'file'):
        # –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
        converted_file = convert_image_to_webp(
            self.photo.file,
            quality=85,
            max_dimension=2560
        )
        self.photo = converted_file
    super().save(*args, **kwargs)
```

### 4. –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (utils.py)

```python
def convert_image_to_webp(uploaded_file, quality=85, max_dimension=2560):
    """
    –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:
    1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Pillow (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ HEIC —á–µ—Ä–µ–∑ pillow-heif)
    2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ RGB —Ä–µ–∂–∏–º (–¥–ª—è WebP)
    3. –ü—Ä–∏–º–µ–Ω—è–µ—Ç EXIF —Ä–æ—Ç–∞—Ü–∏—é
    4. –£–º–µ–Ω—å—à–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π)
    5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ WebP —Å –∫–∞—á–µ—Å—Ç–≤–æ–º 85%
    6. –ò–∑–º–µ–Ω—è–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ .webp
    7. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç InMemoryUploadedFile
    """
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–≥—Ä—É–∑–∫–∞ "–§–æ—Ç–æ –î–æ" —á–µ—Ä–µ–∑ frontend

```typescript
// Issues.tsx
const handleOpenPhotoModal = (issueId: number, photoType: 'before' | 'after') => {
  setSelectedIssueId(issueId)
  setUploadPhotoType(photoType)
  setIsPhotoModalOpen(true)
}

// –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ backend
const formData = new FormData()
formData.append('issue', issueId.toString())
formData.append('stage', photoType === 'before' ? 'BEFORE' : 'AFTER')
formData.append('photo', file.originFileObj)
```

### –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ API –Ω–∞–ø—Ä—è–º—É—é (curl)

```bash
# –ó–∞–≥—Ä—É–∑–∫–∞ JPEG –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ WebP)
curl -X POST \
  http://localhost:8001/api/issues/123/upload_photo/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "photo=@photo.jpg" \
  -F "stage=BEFORE"

# –ó–∞–≥—Ä—É–∑–∫–∞ HEIC –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å iPhone (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ WebP)
curl -X POST \
  http://localhost:8001/api/issues/123/upload_photo/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -F "photo=@IMG_1234.HEIC" \
  -F "stage=AFTER"
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
docker compose exec backend python test_image_conversion.py
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```
============================================================
–¢–ï–°–¢ –ö–û–ù–í–ï–†–¢–ê–¶–ò–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –í WEBP
============================================================

‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
   - image/jpeg
   - image/jpg
   - image/png
   - image/heic
   - image/heif
   - image/bmp
   - image/tiff
   - image/webp

‚úÖ –ú–æ–¥—É–ª—å pillow-heif —É—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
‚úÖ –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ
‚úÖ pillow-heif –≤–µ—Ä—Å–∏—è: 0.18.0
‚úÖ Pillow –≤–µ—Ä—Å–∏—è: 10.4.0

‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´ –£–°–ü–ï–®–ù–û!
```

---

## üìä –ü—Ä–∏–º–µ—Ä—ã —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤

| –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | –†–∞–∑–º–µ—Ä –î–æ | WebP (85%) | –≠–∫–æ–Ω–æ–º–∏—è |
|----------------|-----------|------------|----------|
| JPEG (4000x3000) | 3.2 –ú–ë | 890 –ö–ë | 72% ‚¨áÔ∏è |
| PNG (2048x1536) | 5.8 –ú–ë | 1.1 –ú–ë | 81% ‚¨áÔ∏è |
| HEIC (4032x3024) | 2.1 –ú–ë | 780 –ö–ë | 63% ‚¨áÔ∏è |
| TIFF (3000x2000) | 17.2 –ú–ë | 1.4 –ú–ë | 92% ‚¨áÔ∏è |

### –≠–∫–æ–Ω–æ–º–∏—è –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–µ

```
–ü—Ä–∏ 1000 –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ:
- –ò—Å—Ö–æ–¥–Ω—ã–π –æ–±—ä–µ–º: ~5 –ì–ë
- –ü–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏: ~1 –ì–ë
- –≠–∫–æ–Ω–æ–º–∏—è: ~4 –ì–ë (80%)
```

---

## ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç

```python
# –û—Ç–≤–µ—Ç API –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞
{
  "photo": [
    "–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: image/gif. "
    "–î–æ–ø—É—Å—Ç–∏–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, HEIC, HEIF, BMP, TIFF, WebP"
  ]
}
```

### –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

```python
# –û—Ç–≤–µ—Ç API –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (50 –ú–ë)
{
  "photo": [
    "–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 50 –ú–ë. "
    "–†–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞: 65.32 –ú–ë"
  ]
}
```

### –û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

```python
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ (–Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ)
logger.error(f"–û—à–∏–±–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ WebP: {str(e)}")
# –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

```python
# apps/issues/models.py
def save(self, *args, **kwargs):
    converted_file = convert_image_to_webp(
        self.photo.file,
        quality=90,  # –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 90% –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
        max_dimension=2560
    )
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

```python
# apps/issues/models.py
def save(self, *args, **kwargs):
    converted_file = convert_image_to_webp(
        self.photo.file,
        quality=85,
        max_dimension=4096  # –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 4096px
    )
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞

```python
# apps/issues/serializers.py
def validate_photo(self, value):
    max_size = 100 * 1024 * 1024  # –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ 100 –ú–ë
    if value.size > max_size:
        raise serializers.ValidationError(...)
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ backend
docker compose logs backend -f | grep "–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```bash
# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä backend
docker compose exec backend bash

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
ls -lh /app/media/issues/2025/10/18/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Ñ–∞–π–ª–∞
file /app/media/issues/2025/10/18/photo_name.webp
# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: RIFF (little-endian) data, Web/P image
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Pillow](https://pillow.readthedocs.io/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è pillow-heif](https://github.com/bigcat88/pillow_heif)
- [WebP Format Documentation](https://developers.google.com/speed/webp)

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ WebP –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í—Å–µ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç –º–µ—Å—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ —É–ª—É—á—à–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –¥–æ 80-90% –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, –≤–∫–ª—é—á–∞—è HEIC (iPhone)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
