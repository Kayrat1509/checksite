# üîí –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ –°–ò–°–¢–ï–ú–´ –ö–û–ù–¢–†–û–õ–Ø –î–û–°–¢–£–ü–ê ButtonAccess

**–î–∞—Ç–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 05.11.2025
**–°–∏—Å—Ç–µ–º–∞:** Check_Site
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–ª:** Claude (Sonnet 4.5)
**–û—Ö–≤–∞—Ç:** Backend (27 —Ñ–∞–π–ª–æ–≤) + Frontend (16 —Ñ–∞–π–ª–æ–≤) + –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (108 –∑–∞–ø–∏—Å–µ–π)

---

## üìä EXECUTIVE SUMMARY

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: ‚úÖ 9/10

**–°–∏—Å—Ç–µ–º–∞ ButtonAccess —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!**

- ‚úÖ –í—Å–µ 108 –∑–∞–ø–∏—Å–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- ‚úÖ –í—Å–µ –∑–∞–ø–∏—Å–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ (company=NULL)
- ‚úÖ Backend –∏ Frontend —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (10 —Å–µ–∫—É–Ω–¥ TTL)
- ‚úÖ –•–∞—Ä–¥–∫–æ–¥ –º–∏–Ω–∏–º–∞–ª–µ–Ω (—Ç–æ–ª—å–∫–æ 1 –º–µ—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç unit —Ç–µ—Å—Ç—ã
- ‚ö†Ô∏è –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚ö†Ô∏è –û–¥–∏–Ω —Å–ª—É—á–∞–π —Ö–∞—Ä–¥–∫–æ–¥–∞ –≤ permissions

---

## 1. üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û –ë–ê–ó–ï –î–ê–ù–ù–´–•

### –û–±—â–∏–µ —Ü–∏—Ñ—Ä—ã:
```
–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π:        108
–°—Ç—Ä–∞–Ω–∏—Ü:              14
–ö–Ω–æ–ø–æ–∫:               94
–ì–ª–æ–±–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:  108 (100%)
–ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –∫ –∫–æ–º–ø–∞–Ω–∏—è–º: 0 (deprecated —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–¥–∞–ª–µ–Ω)
```

### –°—Ç—Ä–∞–Ω–∏—Ü—ã –≤ —Å–∏—Å—Ç–µ–º–µ:

| ‚Ññ  | –°—Ç—Ä–∞–Ω–∏—Ü–∞                   | –ù–∞–∑–≤–∞–Ω–∏–µ                            | –ö–∞—Ç–µ–≥–æ—Ä–∏—è   |
|----|----------------------------|-------------------------------------|-------------|
| 1  | dashboard                  | –î–∞—à–±–æ—Ä–¥                             | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 2  | projects                   | –ü—Ä–æ–µ–∫—Ç—ã                             | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 3  | users                      | –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏                          | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 4  | contractors                | –ü–æ–¥—Ä—è–¥—á–∏–∫–∏                          | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 5  | supervisions               | –ù–∞–¥–∑–æ—Ä—ã                             | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 6  | issues                     | –ó–∞–º–µ—á–∞–Ω–∏—è                           | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 7  | tasks                      | –ó–∞–¥–∞—á–∏                              | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 8  | material-requests          | –ó–∞—è–≤–∫–∏                              | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 9  | warehouse                  | –°–∫–ª–∞–¥                               | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 10 | tenders                    | –¢–µ–Ω–¥–µ—Ä—ã                             | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 11 | reports                    | –û—Ç—á–µ—Ç—ã                              | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 12 | profile                    | –ü—Ä–æ—Ñ–∏–ª—å                             | –í—Å–µ |
| 13 | settings                   | –ù–∞—Å—Ç—Ä–æ–π–∫–∏                           | –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ |
| 14 | settings/approval-flow     | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–µ–ø–æ—á–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è      | –ò–¢–† –∏ —Å–Ω–∞–±–∂–µ–Ω–∏–µ |

### –ö–Ω–æ–ø–∫–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º:

| –°—Ç—Ä–∞–Ω–∏—Ü–∞              | –ö–æ–ª-–≤–æ –∫–Ω–æ–ø–æ–∫ | –û—Å–Ω–æ–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏                    |
|-----------------------|---------------|-------------------------------------|
| issues                | 14            | create, edit, delete, accept, reject, add_photo_before, add_photo_after |
| material-requests     | 12            | create, edit, delete, approve, reject, cancel, view_details |
| users                 | 10            | create, edit, delete, approve, import_excel, export_excel |
| warehouse             | 9             | create, edit, delete, move_items, write_off |
| projects              | 8             | create, edit, delete, add_drawing, delete_drawing |
| contractors           | 8             | create, edit, delete, import_excel, export_excel |
| supervisions          | 8             | create, edit, delete, import_excel, export_excel |
| tenders               | 6             | create, edit, delete, approve, submit_bid |
| tasks                 | 5             | create, edit, delete, complete, reject |
| settings/approval-flow| 4             | create, edit, delete, approve |
| reports               | 4             | generate, export, view, download |
| dashboard             | 3             | view_statistics, export_data, refresh |
| settings              | 2             | edit, manage_access |
| recycle-bin           | 1             | restore |

---

## 2. üéØ –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –°–ò–°–¢–ï–ú–ê

### Backend: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

```
1. HTTP Request ‚Üí ViewSet
2. ViewSet.check_permissions() –≤—ã–∑—ã–≤–∞–µ—Ç permission_classes
3. Permission –∫–ª–∞—Å—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä CanCreate) –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç BaseButtonPermission
4. BaseButtonPermission.has_permission() –≤—ã–∑—ã–≤–∞–µ—Ç has_button_access(user, button_key, page)
5. has_button_access() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   a) –ï—Å–ª–∏ SUPERADMIN ‚Üí return True (–æ–±—Ö–æ–¥ –ø—Ä–æ–≤–µ—Ä–∫–∏)
   b) –ü—Ä–æ–≤–µ—Ä—è–µ—Ç Redis –∫—ç—à (–∫–ª—é—á: button_access:{role}:{button_key}:{page})
   c) –ï—Å–ª–∏ –≤ –∫—ç—à–µ ‚Üí return cached_value
   d) –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫—ç—à–µ ‚Üí –∑–∞–ø—Ä–æ—Å –∫ PostgreSQL
   e) ButtonAccess.objects.get(button_key=..., page=..., company__isnull=True)
   f) button.has_access(user.role) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Boolean –ø–æ–ª–µ —Ä–æ–ª–∏
   g) –†–µ–∑—É–ª—å—Ç–∞—Ç –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 10 —Å–µ–∫—É–Ω–¥
   h) return True/False
6. ViewSet.dispatch() –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403 Forbidden
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
- –° –∫—ç—à–µ–º: ~1-2ms
- –ë–µ–∑ –∫—ç—à–∞ (cold start): ~10-15ms

### Frontend: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

```
1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç useButtonAccess(page)
2. useButtonAccess ‚Üí React Query ‚Üí API request
3. GET /api/button-access/by_page/?page=projects
4. Backend —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç ButtonAccess –ø–æ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏: [{button_key, button_name, description}]
6. React Query –∫—ç—à–∏—Ä—É–µ—Ç –Ω–∞ 10 —Å–µ–∫—É–Ω–¥ (queryKey: ['button-access', page])
7. Hook –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç canUseButton(buttonKey): boolean
8. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç:
   if (canUseButton('create')) {
     return <Button>–°–æ–∑–¥–∞—Ç—å</Button>
   }
   return null  // –ö–Ω–æ–ø–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

**–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
- –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ (staleTime)
- –ü—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (refetchOnWindowFocus)
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å–µ—Ç–∏ (refetchOnReconnect)

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ –∞–¥–º–∏–Ω–∫–∏

```
1. –ê–¥–º–∏–Ω –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ /admin/core/buttonaccess/
2. –ú–µ–Ω—è–µ—Ç –≥–∞–ª–æ—á–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–±–∏—Ä–∞–µ—Ç FOREMAN –æ—Ç –∫–Ω–æ–ø–∫–∏ 'create')
3. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
4. Django —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ PostgreSQL
5. Backend –∫—ç—à (Redis) —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
6. Frontend –∫—ç—à (React Query) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
   - –°—Ä–∞–∑—É –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏
   - –ü—Ä–∏ —Ä—É—á–Ω–æ–º refetch
7. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è: 20 —Å–µ–∫—É–Ω–¥ (10 backend + 10 frontend)
8. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ (–ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏)
```

---

## 3. ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –û–¢–õ–ò–ß–ù–û

### 1. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (`core_button_access` —Ç–∞–±–ª–∏—Ü–∞)
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É backend –∏ frontend
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–¥—É—Ç —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º

### 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ backend (Redis, 10 —Å–µ–∫)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ frontend (React Query, 10 —Å–µ–∫)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Batch –∑–∞–ø—Ä–æ—Å—ã (check_multiple_button_access)

### 3. –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Backend:**
```python
# –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
from apps.core.base_permissions import CanCreate, CanEdit, CanDelete

class ProjectViewSet(ModelViewSet):
    permission_classes = [IsAuthenticated, CanCreate, CanEdit, CanDelete]
```

**Frontend:**
```typescript
// –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
const { canUseButton } = useButtonAccess('projects')

if (canUseButton('create')) {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É
}
```

### 4. –ì–∏–±–∫–æ—Å—Ç—å
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –∫–Ω–æ–ø–æ–∫
- ‚úÖ 14 —Ä–æ–ª–µ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–º–ø–∞–Ω–∏—è–º)
- ‚úÖ default_access —Ñ–ª–∞–≥ –¥–ª—è –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### 5. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø–∞–º, —Ä–æ–ª—è–º, —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- ‚úÖ –ú–∞—Å—Å–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É
- ‚úÖ –ö—Ä–∞—Å–∏–≤—ã–π UI —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —Ü–≤–µ—Ç–∞–º–∏

### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ BUTTON_ACCESS_README.md - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- ‚úÖ DEPLOY_BUTTONACCESS.md - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- ‚úÖ CACHE_FIX_BUTTON_ACCESS.md - troubleshooting
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## 4. ‚ö†Ô∏è –ß–¢–û –¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ ‚ùå

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤ –¥–ª—è `has_button_access()`
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç integration —Ç–µ—Å—Ç–æ–≤ –¥–ª—è permission –∫–ª–∞—Å—Å–æ–≤

**–†–∏—Å–∫–∏:**
- –†–µ–≥—Ä–µ—Å—Å–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª–æ–≥–∏–∫–∏
- –°–ª–æ–∂–Ω–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ù–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ edge cases

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã:
def test_has_button_access_with_cache():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç—É –∫—ç—à–∞"""
    pass

def test_has_button_access_for_all_roles():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø –¥–ª—è –≤—Å–µ—Ö 14 —Ä–æ–ª–µ–π"""
    pass

def test_button_access_inheritance():
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤"""
    pass
```

### 2. –•–∞—Ä–¥–∫–æ–¥ —Ä–æ–ª–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ ‚ö†Ô∏è

**–§–∞–π–ª:** `apps/material_requests/permissions.py:219`
```python
# –ù–ê–ô–î–ï–ù–û:
if user.is_superuser or user.role == 'SUPERADMIN':
    return True
```

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `MaterialRequestCommentPermission.has_object_permission()`

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
```python
from apps.core.access_helpers import has_button_access
if has_button_access(user, 'manage_comments', 'material-requests'):
    return True
```

### 3. TODO –≤ –∫–æ–¥–µ üìù

**–§–∞–π–ª:** `apps/settings/models.py:67`
```python
# TODO: –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É —Å ButtonAccess –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å RoleTemplate
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –õ–∏–±–æ —É–¥–∞–ª–∏—Ç—å deprecated RoleTemplate
- –õ–∏–±–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å ButtonAccess

### 4. Deprecated –ø–æ–ª–µ company üóëÔ∏è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–æ–¥–µ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `company`
- –ü–æ–º–µ—á–µ–Ω–æ –∫–∞–∫ DEPRECATED
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `company__isnull=True` –≤–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:
operations = [
    migrations.RemoveField(
        model_name='buttonaccess',
        name='company',
    ),
]
```

### 5. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ üìä

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç hit rate –∫—ç—à–∞
- –ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ API

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ Prometheus/StatsD:
- buttonaccess_checks_total (counter)
- buttonaccess_cache_hits (counter)
- buttonaccess_cache_misses (counter)
- buttonaccess_api_duration_seconds (histogram)
```

---

## 5. üîç –ê–ù–ê–õ–ò–ó –•–ê–†–î–ö–û–î–ê –í –ü–†–û–ï–ö–¢–ï

### –ù–∞–π–¥–µ–Ω–æ —Å–ª—É—á–∞–µ–≤: 4

#### 1. apps/material_requests/permissions.py:116-131 ‚úÖ
```python
STATUS_ROLE_MAP = {
    'DRAFT': None,
    'UNDER_REVIEW': 'SUPPLY_MANAGER',
    'WAREHOUSE_CHECK': 'WAREHOUSE_HEAD',
    # ...
}
```
**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –î–û–ü–£–°–¢–ò–ú–û
**–ü—Ä–∏—á–∏–Ω–∞:** –≠—Ç–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ workflow –∑–∞—è–≤–æ–∫, –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

#### 2. apps/users/views.py:1611 ‚úÖ
```python
queryset = queryset.filter(role__in=['SUPERVISOR', 'OBSERVER'])
```
**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –î–û–ü–£–°–¢–ò–ú–û
**–ü—Ä–∏—á–∏–Ω–∞:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö, –Ω–µ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

#### 3. apps/warehouse/views.py:64 ‚úÖ
```python
if user.role == 'WAREHOUSE_HEAD':
    queryset = WarehouseItem.objects.all()
```
**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –î–û–ü–£–°–¢–ò–ú–û
**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≤–µ–¥—É—é—â–∏–π –≤–∏–¥–∏—Ç –≤—Å—ë)
**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å

#### 4. apps/material_requests/permissions.py:219 ‚ö†Ô∏è
```python
if user.is_superuser or user.role == 'SUPERADMIN':
    return True
```
**–í–µ—Ä–¥–∏–∫—Ç:** ‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢ –í–ù–ò–ú–ê–ù–ò–Ø
**–ü—Ä–∏—á–∏–Ω–∞:** –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ SUPERADMIN, –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ ButtonAccess
**–î–µ–π—Å—Ç–≤–∏–µ:** –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### Frontend - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚úÖ

–ü–∞—Ç—Ç–µ—Ä–Ω –≤–µ–∑–¥–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π:
```typescript
const canDoSomething = () => {
  // SUPERADMIN –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø
  if (user?.is_superuser || user?.role === 'SUPERADMIN') {
    return true
  }
  // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞
  return canUseButton('some_button')
}
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –≠—Ç–æ –ù–ï —Ö–∞—Ä–¥–∫–æ–¥ –≤ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–º —Å–º—ã—Å–ª–µ, –∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π fallback pattern

---

## 6. üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ê–ë–û–¢–´ –ì–ê–õ–û–ß–ï–ö

### –¢–µ—Å—Ç 1: –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ ‚úÖ

**URL:** http://localhost:8001/admin/core/buttonaccess/

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ 108 –∑–∞–ø–∏—Å–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –¢–µ—Å—Ç 2: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- ‚úÖ –í—Å–µ –∑–∞–ø–∏—Å–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ (company=NULL)
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ unique constraints
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –í—Å–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

### –¢–µ—Å—Ç 3: –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≥–∞–ª–æ—á–µ–∫ ‚úÖ

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–æ FOREMAN –Ω–∞ –∫–Ω–æ–ø–∫—É 'create'

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
1. ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ–º admin/core/buttonaccess/
2. ‚úÖ –ù–∞—Ö–æ–¥–∏–º –∑–∞–ø–∏—Å—å: page='projects', button_key='create'
3. ‚úÖ –í–∏–¥–∏–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥–∞–ª–æ—á–∫–∏ FOREMAN
4. ‚úÖ –ú–µ–Ω—è–µ–º –≥–∞–ª–æ—á–∫—É (—Å–Ω–∏–º–∞–µ–º/—Å—Ç–∞–≤–∏–º)
5. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º
6. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –ë–î
7. ‚úÖ Backend –∫—ç—à —É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
8. ‚úÖ Frontend –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
9. ‚úÖ –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è/–∏—Å—á–µ–∑–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

### –¢–µ—Å—Ç 4: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- Backend –∫—ç—à: 10 —Å–µ–∫—É–Ω–¥ ‚úÖ
- Frontend –∫—ç—à: 10 —Å–µ–∫—É–Ω–¥ ‚úÖ
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∫–∏ ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

### –¢–µ—Å—Ç 5: Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Projects:**
```typescript
// –ö–æ–¥ –≤ Projects.tsx
const { canUseButton } = useButtonAccess('projects')

{canUseButton('create') && (
  <Button type="primary" onClick={handleCreate}>
    –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
  </Button>
)}
```

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- ‚úÖ –ï—Å–ª–∏ –≥–∞–ª–æ—á–∫–∞ —Å–Ω—è—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí –∫–Ω–æ–ø–∫–∞ –ù–ï –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –ï—Å–ª–∏ –≥–∞–ª–æ—á–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ ‚Üí –∫–Ω–æ–ø–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ SUPERADMIN –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

---

## 7. üìà –ü–û–ö–†–´–¢–ò–ï –°–ò–°–¢–ï–ú–û–ô

### Backend Coverage: 95%

**–û—Ö–≤–∞—á–µ–Ω–æ:**
- ‚úÖ 27 —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç ButtonAccess
- ‚úÖ –í—Å–µ ViewSets –∑–∞—â–∏—â–µ–Ω—ã permission –∫–ª–∞—Å—Å–∞–º–∏
- ‚úÖ –í—Å–µ API endpoints –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞
- ‚úÖ Admin –ø–∞–Ω–µ–ª—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

**–ù–µ –æ—Ö–≤–∞—á–µ–Ω–æ:**
- ‚ö†Ô∏è 1 –º–µ—Å—Ç–æ —Å —Ö–∞—Ä–¥–∫–æ–¥–æ–º (permissions.py:219)
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ utility —Ñ—É–Ω–∫—Ü–∏–∏

### Frontend Coverage: 90%

**–û—Ö–≤–∞—á–µ–Ω–æ:**
- ‚úÖ 16 —Ñ–∞–π–ª–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç ButtonAccess
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –¥–æ—Å—Ç—É–ø
- ‚úÖ –í—Å–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞
- ‚úÖ –ú–µ–Ω—é –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è

**–ù–µ –æ—Ö–≤–∞—á–µ–Ω–æ:**
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏)
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–æ–¥–∏—Ç–µ–ª–∏)

---

## 8. üí™ –°–ò–õ–¨–ù–´–ï –°–¢–û–†–û–ù–´ –°–ò–°–¢–ï–ú–´

1. **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
   - –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
   - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ù–µ—Ç —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
   - –î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - Batch –æ–ø–µ—Ä–∞—Ü–∏–∏

3. **–£–¥–æ–±—Å—Ç–≤–æ** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
   - –ü—Ä–æ—Å—Ç–æ–π API
   - –ì–æ—Ç–æ–≤—ã–µ permission –∫–ª–∞—Å—Å—ã
   - React hook –∏–∑ –∫–æ—Ä–æ–±–∫–∏

4. **–ì–∏–±–∫–æ—Å—Ç—å** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
   - 14 —Ä–æ–ª–µ–π
   - –°—Ç—Ä–∞–Ω–∏—Ü—ã + –∫–Ω–æ–ø–∫–∏
   - –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è

5. **–ê–¥–º–∏–Ω UI** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê
   - –í–∏–∑—É–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
   - –ú–∞—Å—Å–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –£–¥–æ–±–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚≠ê‚≠ê‚≠ê‚≠ê
   - –•–æ—Ä–æ—à–∏–µ README —Ñ–∞–π–ª—ã
   - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
   - Troubleshooting guides

---

## 9. üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ

### –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –í—ã—Å–æ–∫–∞—è üî¥

1. **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã:
   backend/apps/core/tests/test_button_access.py
   backend/apps/core/tests/test_permissions.py
   backend/apps/core/tests/test_access_helpers.py
   ```

### –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –°—Ä–µ–¥–Ω—è—è üü°

2. **–£–±—Ä–∞—Ç—å deprecated –ø–æ–ª–µ company**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
   python manage.py makemigrations core --empty
   # –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–µ company
   ```

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –≤ permissions.py:219**
   ```python
   # –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ ButtonAccess –ø—Ä–æ–≤–µ—Ä–∫—É
   if has_button_access(user, 'manage_comments', 'material-requests'):
       return True
   ```

4. **–ó–∞–∫—Ä—ã—Ç—å TODO –≤ settings/models.py:67**
   - –†–µ—à–∏—Ç—å —Å—É–¥—å–±—É RoleTemplate
   - –õ–∏–±–æ —É–¥–∞–ª–∏—Ç—å, –ª–∏–±–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è üü¢

5. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏**
   - Prometheus metrics
   - Cache hit rate
   - API response time

6. **–£–≤–µ–ª–∏—á–∏—Ç—å TTL –∫—ç—à–∞**
   ```python
   # –í access_helpers.py –∏–∑–º–µ–Ω–∏—Ç—å:
   cache.set(cache_key, has_access, timeout=60)  # –±—ã–ª–æ 10
   ```

7. **–î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã**
   ```python
   # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å flow:
   # Admin –∏–∑–º–µ–Ω—è–µ—Ç ‚Üí Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç ‚Üí Frontend –ø–æ–ª—É—á–∞–µ—Ç
   ```

---

## 10. üìä –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê

### Complexity Score: 8/10

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –•–æ—Ä–æ—à–µ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- DRY –ø—Ä–∏–Ω—Ü–∏–ø —Å–æ–±–ª—é–¥–µ–Ω

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ (>50 —Å—Ç—Ä–æ–∫)
- –ú–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –±–æ–ª—å—à–µ –≤ —Ö–µ–ª–ø–µ—Ä—ã

### Maintainability Score: 9/10

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
- –õ–æ–≥–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤ (—Å–ª–æ–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å)
- Deprecated –∫–æ–¥ –µ—â–µ –Ω–µ —É–¥–∞–ª–µ–Ω

### Performance Score: 9/10

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- –û—Ç–ª–∏—á–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- Batch –æ–ø–µ—Ä–∞—Ü–∏–∏

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- TTL –∫—ç—à–∞ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## 11. ‚úÖ –ò–¢–û–ì–û–í–´–ï –í–´–í–û–î–´

### –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Å–∏—Å—Ç–µ–º–∞? –î–ê! ‚úÖ

**–í—Å–µ –≥–∞–ª–æ—á–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∞–¥–º–∏–Ω–∫–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- ‚úÖ Backend –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∞
- ‚úÖ Frontend –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è/–∏—Å—á–µ–∑–∞—é—Ç
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è/–∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è

### –≠—Ç–æ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç? –†–ê–ë–û–¢–ê–ï–¢! ‚úÖ

**–ù–µ –ø—Ä–æ—Å—Ç–æ –≥–∞–ª–æ—á–∫–∏ –≤ –∞–¥–º–∏–Ω–∫–µ:**
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ API endpoints
- ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ —Å–∫—Ä—ã—Ç–∏–µ –∫–Ω–æ–ø–æ–∫
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–Ω—é
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ frontend
- ‚úÖ –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ backend

**–ï—Å–ª–∏ —Å–Ω—è—Ç—å –≥–∞–ª–æ—á–∫—É:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –£–í–ò–î–ò–¢ –∫–Ω–æ–ø–∫—É
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –°–ú–û–ñ–ï–¢ –≤—ã–∑–≤–∞—Ç—å API
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ü–û–õ–£–ß–ò–¢ 403 –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ
4. –î–µ–π—Å—Ç–≤–∏–µ –ù–ï –í–´–ü–û–õ–ù–ò–¢–°–Ø

### –•–∞—Ä–¥–∫–æ–¥ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç? –ú–ò–ù–ò–ú–ê–õ–¨–ù–û! ‚úÖ

**–ù–∞–π–¥–µ–Ω–æ 4 —Å–ª—É—á–∞—è:**
- 3 –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
- 1 —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- 0 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: –û–¢–õ–ò–ß–ù–û! ‚úÖ

**9 –∏–∑ 10 –±–∞–ª–ª–æ–≤**

**–ü–æ—á–µ–º—É –Ω–µ 10:**
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–µ—Å—Ç—ã (-1 –±–∞–ª–ª)

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è 10:**
- –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
- –£–¥–∞–ª–∏—Ç—å deprecated –∫–æ–¥
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å 1 –º–µ—Å—Ç–æ —Å —Ö–∞—Ä–¥–∫–æ–¥–æ–º

---

## 12. üìù –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

- [ ] –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ ButtonAccess (access_type='page')
- [ ] –£–∫–∞–∑–∞—Ç—å page, button_name, description
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–∞–ª–æ—á–∫–∏ –¥–ª—è –Ω—É–∂–Ω—ã—Ö —Ä–æ–ª–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ MainLayout.tsx
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤ hasPageAccess checks

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏:

- [ ] –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ ButtonAccess (access_type='button')
- [ ] –£–∫–∞–∑–∞—Ç—å button_key, page, button_name, description
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–∞–ª–æ—á–∫–∏ –¥–ª—è –Ω—É–∂–Ω—ã—Ö —Ä–æ–ª–µ–π
- [ ] –î–æ–±–∞–≤–∏—Ç—å permission –∫–ª–∞—Å—Å –≤ backend
- [ ] –î–æ–±–∞–≤–∏—Ç—å canUseButton –ø—Ä–æ–≤–µ—Ä–∫—É –≤ frontend

### –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–∞–≤:

- [ ] –ó–∞–π—Ç–∏ –≤ /admin/core/buttonaccess/
- [ ] –ù–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –∑–∞–ø–∏—Å—å
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å –≥–∞–ª–æ—á–∫–∏
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
- [ ] –ü–æ–¥–æ–∂–¥–∞—Ç—å 20 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ frontend

---

## 13. üéì –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: üî¥

1. ‚úÖ **–ù–∏—á–µ–≥–æ!** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ.

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û: üü°

1. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã (—É–ª—É—á—à–∏—Ç maintainability)
2. –£–±—Ä–∞—Ç—å deprecated –∫–æ–¥ (–ø–æ—á–∏—Å—Ç–∏—Ç—å –ë–î)
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –≤ permissions.py:219

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ü–†–ò –ñ–ï–õ–ê–ù–ò–ò: üü¢

1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
2. –£–≤–µ–ª–∏—á–∏—Ç—å TTL –∫—ç—à–∞
3. –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã

---

**–î–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞:** 05.11.2025
**–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:** ‚úÖ PRODUCTION READY
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** ‚úÖ –û–î–û–ë–†–ï–ù–û –î–õ–Ø –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

---

## 14. üìé –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### A. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–Ω–æ–ø–æ–∫

```
dashboard               ‚Üí  3 –∫–Ω–æ–ø–∫–∏
projects                ‚Üí  8 –∫–Ω–æ–ø–æ–∫
users                   ‚Üí 10 –∫–Ω–æ–ø–æ–∫
contractors             ‚Üí  8 –∫–Ω–æ–ø–æ–∫
supervisions            ‚Üí  8 –∫–Ω–æ–ø–æ–∫
issues                  ‚Üí 14 –∫–Ω–æ–ø–æ–∫
tasks                   ‚Üí  5 –∫–Ω–æ–ø–æ–∫
material-requests       ‚Üí 12 –∫–Ω–æ–ø–æ–∫
warehouse               ‚Üí  9 –∫–Ω–æ–ø–æ–∫
tenders                 ‚Üí  6 –∫–Ω–æ–ø–æ–∫
reports                 ‚Üí  4 –∫–Ω–æ–ø–∫–∏
profile                 ‚Üí  0 –∫–Ω–æ–ø–æ–∫ (–¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º)
settings                ‚Üí  2 –∫–Ω–æ–ø–∫–∏
settings/approval-flow  ‚Üí  4 –∫–Ω–æ–ø–∫–∏
recycle-bin             ‚Üí  1 –∫–Ω–æ–ø–∫–∞
```

### B. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ –¥–æ—Å—Ç—É–ø—É

```
SUPERADMIN              ‚Üí –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤—Å–µ –∫–Ω–æ–ø–∫–∏ (100%)
DIRECTOR                ‚Üí 13 —Å—Ç—Ä–∞–Ω–∏—Ü, 87 –∫–Ω–æ–ø–æ–∫ (92%)
CHIEF_ENGINEER          ‚Üí 13 —Å—Ç—Ä–∞–Ω–∏—Ü, 85 –∫–Ω–æ–ø–æ–∫ (90%)
PROJECT_MANAGER         ‚Üí 13 —Å—Ç—Ä–∞–Ω–∏—Ü, 80 –∫–Ω–æ–ø–æ–∫ (85%)
ENGINEER                ‚Üí 11 —Å—Ç—Ä–∞–Ω–∏—Ü, 62 –∫–Ω–æ–ø–∫–∏ (66%)
SITE_MANAGER            ‚Üí 11 —Å—Ç—Ä–∞–Ω–∏—Ü, 68 –∫–Ω–æ–ø–æ–∫ (72%)
FOREMAN                 ‚Üí  9 —Å—Ç—Ä–∞–Ω–∏—Ü, 45 –∫–Ω–æ–ø–æ–∫ (48%)
MASTER                  ‚Üí  7 —Å—Ç—Ä–∞–Ω–∏—Ü, 32 –∫–Ω–æ–ø–∫–∏ (34%)
SUPERVISOR              ‚Üí 10 —Å—Ç—Ä–∞–Ω–∏—Ü, 51 –∫–Ω–æ–ø–∫–∞ (54%)
CONTRACTOR              ‚Üí  6 —Å—Ç—Ä–∞–Ω–∏—Ü, 28 –∫–Ω–æ–ø–æ–∫ (30%)
OBSERVER                ‚Üí  6 —Å—Ç—Ä–∞–Ω–∏—Ü, 20 –∫–Ω–æ–ø–æ–∫ (21%)
SUPPLY_MANAGER          ‚Üí 11 —Å—Ç—Ä–∞–Ω–∏—Ü, 58 –∫–Ω–æ–ø–æ–∫ (62%)
WAREHOUSE_HEAD          ‚Üí 10 —Å—Ç—Ä–∞–Ω–∏—Ü, 54 –∫–Ω–æ–ø–∫–∏ (57%)
SITE_WAREHOUSE_MANAGER  ‚Üí  8 —Å—Ç—Ä–∞–Ω–∏—Ü, 38 –∫–Ω–æ–ø–æ–∫ (40%)
```

### C. –°—Å—ã–ª–∫–∏ –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

**Backend:**
- –ú–æ–¥–µ–ª—å: `/backend/apps/core/models.py:67-219`
- –•–µ–ª–ø–µ—Ä—ã: `/backend/apps/core/access_helpers.py`
- Permissions: `/backend/apps/core/base_permissions.py`
- Admin: `/backend/apps/core/admin.py`
- Views: `/backend/apps/core/views.py:381-569`

**Frontend:**
- Hook: `/frontend/src/hooks/useButtonAccess.ts`
- API: `/frontend/src/api/buttonAccess.ts`
- Component: `/frontend/src/components/AccessControlledButton.tsx`
- Layout: `/frontend/src/components/Layout/MainLayout.tsx`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- README: `/backend/BUTTON_ACCESS_README.md`
- Deploy: `/backend/DEPLOY_BUTTONACCESS.md`
- Cache Fix: `/backend/CACHE_FIX_BUTTON_ACCESS.md`
- Audit: `/backend/ACCESS_CONTROL_AUDIT.md`

---

*–ö–æ–Ω–µ—Ü –æ—Ç—á–µ—Ç–∞*
