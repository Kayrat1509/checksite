# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –¥–ª—è –∑–∞–º–µ—á–∞–Ω–∏–π (Issues)

**–î–∞—Ç–∞:** 2025-11-02
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/dashboard/issues` —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:

1. ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å"** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è –ò–¢–† –∏ –ù–∞–¥–∑–æ—Ä–∞
2. ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É"** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ)
3. ‚úÖ **Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email –ø–æ–¥—Ä—è–¥—á–∏–∫—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–º–µ—á–∞–Ω–∏—è

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1Ô∏è‚É£ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–Ω–æ–ø–∫–∞ `accept` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ `ButtonAccess`, –ø–æ—ç—Ç–æ–º—É —Ñ—É–Ω–∫—Ü–∏—è `canAcceptIssue()` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ `false` –¥–ª—è –≤—Å–µ—Ö —Ä–æ–ª–µ–π –∫—Ä–æ–º–µ SUPERADMIN.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–ª—è –ò–¢–† –∏ –ù–∞–¥–∑–æ—Ä–∞.

---

## üìÇ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. Backend - –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞

**–§–∞–π–ª:** [backend/apps/core/management/commands/populate_button_access.py](backend/apps/core/management/commands/populate_button_access.py)

**–î–æ–±–∞–≤–ª–µ–Ω–æ 2 –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏:**

```python
# –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É"
{
    'page': 'issues',
    'button_key': 'send_to_review',
    'button_name': '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É',
    'description': '–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–º–µ—á–∞–Ω–∏—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –ò–¢–† –∏–ª–∏ –ù–∞–¥–∑–æ—Ä—É',
    'default_access': False,
    'DIRECTOR': True,
    'CHIEF_ENGINEER': True,
    'PROJECT_MANAGER': True,
    'ENGINEER': True,
    'SITE_MANAGER': True,
    'FOREMAN': True,
    'MASTER': True,
    'SUPERVISOR': True,
    'OBSERVER': True,
    'CONTRACTOR': True,  # –ü–æ–¥—Ä—è–¥—á–∏–∫ —Ç–æ–∂–µ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
}

# –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" (–¥–ª—è –ò–¢–† –∏ –ù–∞–¥–∑–æ—Ä–∞)
{
    'page': 'issues',
    'button_key': 'accept',
    'button_name': '–ü—Ä–∏–Ω—è—Ç—å',
    'description': '–ü—Ä–∏–Ω—è—Ç–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–≥–æ –∑–∞–º–µ—á–∞–Ω–∏—è (–ø–µ—Ä–µ–≤–æ–¥ –≤ —Å—Ç–∞—Ç—É—Å COMPLETED)',
    'default_access': False,
    'DIRECTOR': True,           # –î–∏—Ä–µ–∫—Ç–æ—Ä
    'CHIEF_ENGINEER': True,     # –ì–ª–∞–≤–Ω—ã–π –∏–Ω–∂–µ–Ω–µ—Ä
    'PROJECT_MANAGER': True,    # –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
    'ENGINEER': True,           # –ò–Ω–∂–µ–Ω–µ—Ä (–ò–¢–†)
    'SITE_MANAGER': True,       # –ù–∞—á–∞–ª—å–Ω–∏–∫ —É—á–∞—Å—Ç–∫–∞ (–ò–¢–†)
    'FOREMAN': True,            # –ü—Ä–æ—Ä–∞–± (–ò–¢–†)
    'MASTER': True,             # –ú–∞—Å—Ç–µ—Ä (–ò–¢–†)
    'SUPERVISOR': True,         # –¢–µ—Ö–Ω–∞–¥–∑–æ—Ä (–ù–∞–¥–∑–æ—Ä)
    'OBSERVER': True,           # –ê–≤—Ç–æ—Ä—Å–∫–∏–π –Ω–∞–¥–∑–æ—Ä (–ù–∞–¥–∑–æ—Ä)
}
```

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:**
```bash
docker compose exec backend python manage.py populate_button_access
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì –°–æ–∑–¥–∞–Ω–æ: issues - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
‚úì –°–æ–∑–¥–∞–Ω–æ: issues - –ü—Ä–∏–Ω—è—Ç—å
–ó–∞–≤–µ—Ä—à–µ–Ω–æ! –°–æ–∑–¥–∞–Ω–æ: 2, –û–±–Ω–æ–≤–ª–µ–Ω–æ: 55
```

---

### 2. Frontend - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

**–§–∞–π–ª:** [frontend/src/pages/Issues.tsx:345](frontend/src/pages/Issues.tsx#L345)

**–î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `canSendToReview()`:**

```typescript
// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–º–µ—á–∞–Ω–∏—è –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞
const canSendToReview = () => {
  // SUPERADMIN –≤—Å–µ–≥–¥–∞ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø
  if (user?.is_superuser || user?.role === 'SUPERADMIN') {
    return true
  }
  // –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π –ø—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
  return canUseButton('send_to_review')
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É" (—Å—Ç—Ä–æ–∫–∞ 1065):**

```typescript
{/* –†—è–¥ 3: –ù–∞ –ø—Ä–æ–≤–µ—Ä–∫—É (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞) */}
{canSendToReview() && issue.status !== 'COMPLETED' && issue.status !== 'REJECTED' && (
  <Button ... >
    {issue.status === 'PENDING_REVIEW' ? '–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ' : '–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫—É'}
  </Button>
)}
```

---

### 3. Backend - Email Templates

**–°–æ–∑–¥–∞–Ω—ã 2 —Ñ–∞–π–ª–∞:**

#### HTML –≤–µ—Ä—Å–∏—è
**–§–∞–π–ª:** [backend/templates/issues/emails/new_issue_assigned.html](backend/templates/issues/emails/new_issue_assigned.html)

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º–æ–π –¥–ª—è –∑–∞–º–µ—á–∞–Ω–∏–π
- –î–µ—Ç–∞–ª–∏ –∑–∞–º–µ—á–∞–Ω–∏—è (–ø—Ä–æ–µ–∫—Ç, —É—á–∞—Å—Ç–æ–∫, –æ–ø–∏—Å–∞–Ω–∏–µ)
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (–∫—Ä–∏—Ç–∏—á–Ω—ã–π/–≤—ã—Å–æ–∫–∏–π/–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π)
- –°—Ä–æ–∫ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º
- –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–º–µ—á–∞–Ω–∏—é"

#### –¢–µ–∫—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
**–§–∞–π–ª:** [backend/templates/issues/emails/new_issue_assigned.txt](backend/templates/issues/emails/new_issue_assigned.txt)

–ü—Ä–æ—Å—Ç–∞—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –ø–æ—á—Ç–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏—Ö HTML.

---

### 4. Backend - Celery Task –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Email

**–§–∞–π–ª:** [backend/apps/issues/tasks.py:92-191](backend/apps/issues/tasks.py#L92-L191)

**–î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞ `send_new_issue_notification()`:**

```python
@shared_task(bind=True, max_retries=3, default_retry_delay=60)
def send_new_issue_notification(self, issue_id):
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–¥—Ä—è–¥—á–∏–∫—É –æ –Ω–æ–≤–æ–º –∑–∞–º–µ—á–∞–Ω–∏–∏.

    –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ (3 —Ä–∞–∑–∞ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 60 —Å–µ–∫—É–Ω–¥)
    - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –∏ email
    - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–º—ã –ø–∏—Å—å–º–∞ —Å —É—á–µ—Ç–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTML –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –ø–∏—Å—å–º–∞
    - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
    """
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ email —É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
- –§–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–µ–º—É –ø–∏—Å—å–º–∞ —Å —É—á–µ—Ç–æ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
  - CRITICAL ‚Üí "–ö–†–ò–¢–ò–ß–ù–û–ï: –ó–∞–º–µ—á–∞–Ω–∏–µ #123 - –ù–∞–∑–≤–∞–Ω–∏–µ"
  - HIGH ‚Üí "–í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢: –ó–∞–º–µ—á–∞–Ω–∏–µ #123 - –ù–∞–∑–≤–∞–Ω–∏–µ"
  - NORMAL ‚Üí "–ù–æ–≤–æ–µ: –ó–∞–º–µ—á–∞–Ω–∏–µ #123 - –ù–∞–∑–≤–∞–Ω–∏–µ"
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç URL –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –∑–∞–º–µ—á–∞–Ω–∏—é
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email —Å HTML –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π
- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (max 3 —Ä–∞–∑–∞)

---

### 5. Backend - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Views

**–§–∞–π–ª:** [backend/apps/issues/views.py](backend/apps/issues/views.py)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

1. **–î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç (—Å—Ç—Ä–æ–∫–∞ 15):**
```python
from .tasks import send_new_issue_notification
```

2. **–î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏ email –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—á–∞–Ω–∏—è (—Å—Ç—Ä–æ–∫–∞ 92-94):**
```python
# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–¥—Ä—è–¥—á–∏–∫—É, –µ—Å–ª–∏ –∑–∞–º–µ—á–∞–Ω–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–æ
if issue.assigned_to and issue.assigned_to.email:
    send_new_issue_notification.delay(issue.id)
```

**–õ–æ–≥–∏–∫–∞:**
- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ** —á–µ—Ä–µ–∑ Celery (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏** —É –∑–∞–º–µ—á–∞–Ω–∏—è –µ—Å—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å email
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `.delay()` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á–∏ –≤ —Ñ–æ–Ω–µ

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞) –Ω–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ"
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ
   - –ü—Ä–æ–µ–∫—Ç –∏ —É—á–∞—Å—Ç–æ–∫
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç (CRITICAL/HIGH/NORMAL)
   - **–ù–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥—Ä—è–¥—á–∏–∫–∞** (assigned_to)
   - –°—Ä–æ–∫ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è (deadline)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ "–î–æ"
3. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å"

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ 1. –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–º–µ—á–∞–Ω–∏–µ –≤ –ë–î                         ‚îÇ
‚îÇ 2. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏                           ‚îÇ
‚îÇ 3. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è async –∑–∞–¥–∞—á–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ email          ‚îÇ
‚îÇ    send_new_issue_notification.delay(issue.id) ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ 4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (HTTP 201)    ‚îÇ  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îò
                                                   ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚Üì
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ Celery Worker (—Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞)  ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           ‚îÇ 1. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–º–µ—á–∞–Ω–∏–µ –∏–∑ –ë–î     ‚îÇ
           ‚îÇ 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç assigned_to.email  ‚îÇ
           ‚îÇ 3. –†–µ–Ω–¥–µ—Ä–∏—Ç HTML + Text —à–∞–±–ª–æ–Ω—ã ‚îÇ
           ‚îÇ 4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email             ‚îÇ
           ‚îÇ 5. –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç           ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚Üì
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ –ü–æ–¥—Ä—è–¥—á–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç Email        ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           ‚îÇ –¢–µ–º–∞: –ö–†–ò–¢–ò–ß–ù–û–ï: –ó–∞–º–µ—á–∞–Ω–∏–µ #123 ‚îÇ
           ‚îÇ - –î–µ—Ç–∞–ª–∏ –∑–∞–º–µ—á–∞–Ω–∏—è              ‚îÇ
           ‚îÇ - –°—Ä–æ–∫ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è               ‚îÇ
           ‚îÇ - –ö–Ω–æ–ø–∫–∞ "–ü–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–º–µ—á–∞–Ω–∏—é"  ‚îÇ
           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–¥—Ä—è–¥—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É

1. –ü–æ–¥—Ä—è–¥—á–∏–∫ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –∑–∞–º–µ—á–∞–Ω–∏–µ
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ "–ü–æ—Å–ª–µ"
3. –ù–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É"**
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `canSendToReview() === true`
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞ `ButtonAccess` (button_key='send_to_review')
4. –ó–∞–º–µ—á–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `PENDING_REVIEW`

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò–¢–† –∏–ª–∏ –ù–∞–¥–∑–æ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–º–µ—á–∞–Ω–∏–µ

1. –ò–Ω–∂–µ–Ω–µ—Ä (–ò–¢–†) –∏–ª–∏ –¢–µ—Ö–Ω–∞–¥–∑–æ—Ä (–ù–∞–¥–∑–æ—Ä) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ
2. –ï—Å–ª–∏ –≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É **"–ü—Ä–∏–Ω—è—Ç—å"**
   - ‚úÖ –ö–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `canAcceptIssue() === true`
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–∞—Ç—Ä–∏—Ü—É –¥–æ—Å—Ç—É–ø–∞ `ButtonAccess` (button_key='accept')
   - ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è —Ä–æ–ª–µ–π: DIRECTOR, CHIEF_ENGINEER, PROJECT_MANAGER, ENGINEER, SITE_MANAGER, FOREMAN, MASTER, SUPERVISOR, OBSERVER
3. –ó–∞–º–µ—á–∞–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `COMPLETED`

---

## üîê –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–Ω–æ–ø–∫–∞–º (–ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

| button_key         | button_name             | –†–æ–ª–∏ —Å –¥–æ—Å—Ç—É–ø–æ–º                                                  |
|--------------------|-------------------------|------------------------------------------------------------------|
| `create`           | –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ       | DIRECTOR, CHIEF_ENGINEER, PROJECT_MANAGER, ENGINEER, SITE_MANAGER, FOREMAN, MASTER, SUPERVISOR, OBSERVER |
| `edit`             | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å           | (–≤—Å–µ —Ä–æ–ª–∏ - default_access)                                       |
| `delete`           | –£–¥–∞–ª–∏—Ç—å                 | DIRECTOR, CHIEF_ENGINEER, PROJECT_MANAGER                        |
| `assign`           | –ù–∞–∑–Ω–∞—á–∏—Ç—å –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è   | DIRECTOR, CHIEF_ENGINEER, PROJECT_MANAGER                        |
| `change_status`    | –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å         | (–≤—Å–µ —Ä–æ–ª–∏ - default_access)                                       |
| `add_photo_before` | –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –î–û        | (–≤—Å–µ —Ä–æ–ª–∏ - default_access)                                       |
| `add_photo_after`  | –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –ü–û–°–õ–ï     | (–≤—Å–µ —Ä–æ–ª–∏ - default_access)                                       |
| `add_comment`      | –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π    | (–≤—Å–µ —Ä–æ–ª–∏ - default_access)                                       |
| `view_details`     | –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π        | (–≤—Å–µ —Ä–æ–ª–∏ - default_access)                                       |
| **`send_to_review`** ‚ú® | **–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É** | **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ + –ò–¢–† + –ù–∞–¥–∑–æ—Ä + –ü–æ–¥—Ä—è–¥—á–∏–∫** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ) |
| **`accept`** ‚ú®        | **–ü—Ä–∏–Ω—è—Ç—å**               | **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ + –ò–¢–† + –ù–∞–¥–∑–æ—Ä**                               |

---

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### ‚úÖ –¢–µ—Å—Ç 1: –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –¥–ª—è –ò–¢–†

1. –í–æ–π—Ç–∏ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å —Ä–æ–ª—å—é `ENGINEER` (–ò–Ω–∂–µ–Ω–µ—Ä)
2. –û—Ç–∫—Ä—ã—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ –≤ —Å—Ç–∞—Ç—É—Å–µ `PENDING_REVIEW`
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –¢–µ—Å—Ç 2: –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –¥–ª—è –ù–∞–¥–∑–æ—Ä–∞

1. –í–æ–π—Ç–∏ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å —Ä–æ–ª—å—é `SUPERVISOR` (–¢–µ—Ö–Ω–∞–¥–∑–æ—Ä)
2. –û—Ç–∫—Ä—ã—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ –≤ —Å—Ç–∞—Ç—É—Å–µ `PENDING_REVIEW`
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –¢–µ—Å—Ç 3: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–º–µ—á–∞–Ω–∏—è

1. –í–æ–π—Ç–∏ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å –ø—Ä–∞–≤–∞–º–∏ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—á–∞–Ω–∏–π
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ, –Ω–∞–∑–Ω–∞—á–∏–≤ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ —Å –≤–∞–ª–∏–¥–Ω—ã–º email
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ó–∞–º–µ—á–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
   - –ü–æ–¥—Ä—è–¥—á–∏–∫ –ø–æ–ª—É—á–∏–ª email —Å —Ç–µ–º–æ–π "–ù–æ–≤–æ–µ: –ó–∞–º–µ—á–∞–Ω–∏–µ #XXX - –ù–∞–∑–≤–∞–Ω–∏–µ"
   - Email —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –∑–∞–º–µ—á–∞–Ω–∏—è –∏ –∫–Ω–æ–ø–∫—É –ø–µ—Ä–µ—Ö–æ–¥–∞

### ‚úÖ –¢–µ—Å—Ç 4: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –∑–∞–º–µ—á–∞–Ω–∏—è

1. –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º `CRITICAL`
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ü–æ–¥—Ä—è–¥—á–∏–∫ –ø–æ–ª—É—á–∏–ª email —Å —Ç–µ–º–æ–π "–ö–†–ò–¢–ò–ß–ù–û–ï: –ó–∞–º–µ—á–∞–Ω–∏–µ #XXX - –ù–∞–∑–≤–∞–Ω–∏–µ"
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–¥–µ–ª–µ–Ω –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º –≤ email

### ‚úÖ –¢–µ—Å—Ç 5: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

1. –°–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è `assigned_to`
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ó–∞–º–µ—á–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
   - Email **–Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω** (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Celery)
   - –í –ª–æ–≥–∞—Ö: "–ù–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è"

### ‚úÖ –¢–µ—Å—Ç 6: –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É" –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π

1. –í–æ–π—Ç–∏ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏ (CONTRACTOR, ENGINEER, –∏ —Ç.–¥.)
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –ï—Å–ª–∏ `default_access=True` –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí –∫–Ω–æ–ø–∫–∞ –≤–∏–¥–Ω–∞ –≤—Å–µ–º
   - –ï—Å–ª–∏ —Ä–æ–ª—å –æ—Ç–∫–ª—é—á–µ–Ω–∞ –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä—ã—Ç–∞

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω

### –®–∞–≥–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–∞:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@stroyka.asia

# 2. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/checksite

# 3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git pull

# 4. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker compose up -d --build backend

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫
docker compose exec backend python manage.py populate_button_access

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞–Ω—ã
docker compose exec backend python manage.py shell -c \
  "from apps.core.models import ButtonAccess; \
   buttons = ButtonAccess.objects.filter(page='issues', button_key__in=['send_to_review', 'accept']); \
   print(f'–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫: {buttons.count()}'); \
   [print(f'  - {b.button_key}: {b.button_name}') for b in buttons]"

# 7. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Celery worker
docker compose logs -f celery

# 8. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ email
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —à–∞–≥–∞ 6:**
```
–ù–∞–π–¥–µ–Ω–æ –∫–Ω–æ–ø–æ–∫: 2
  - send_to_review: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
  - accept: –ü—Ä–∏–Ω—è—Ç—å
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:
- [FIX_PHOTO_BUTTONS_MISMATCH.md](FIX_PHOTO_BUTTONS_MISMATCH.md) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Ñ–æ—Ç–æ
- [ISSUES_LOGIC_COMPARISON.md](ISSUES_LOGIC_COMPARISON.md) - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∏ —Ç—Ä–µ–±—É–µ–º–æ–π –ª–æ–≥–∏–∫–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:

1. **–ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞ —Å—Ç—Ä–∞–Ω–∏—Ü:** http://localhost:8001/admin/settings/pageaccess/
2. **–ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Å—Ç—É–ø–∞ –∫–Ω–æ–ø–æ–∫:** http://localhost:8001/admin/core/buttonaccess/

**–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–Ω–æ–ø–∫–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É":**
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:8001/admin/core/buttonaccess/
2. –ù–∞–π—Ç–∏ –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É" (send_to_review)
3. –í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å –≥–∞–ª–æ—á–∫–∏ –¥–ª—è –Ω—É–∂–Ω—ã—Ö —Ä–æ–ª–µ–π
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üìä –ò—Ç–æ–≥–∏

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ë–î —Å –ø—Ä–∞–≤–∞–º–∏ –¥–ª—è –ò–¢–† –∏ –ù–∞–¥–∑–æ—Ä–∞
2. ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É" –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –ë–î (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ `canSendToReview()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
4. ‚úÖ Email templates —Å–æ–∑–¥–∞–Ω—ã (HTML + —Ç–µ–∫—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
5. ‚úÖ Celery task `send_new_issue_notification` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
6. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å views.py –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ email

### üîß –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–Ω—è—Ç—å" —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ò–¢–† –∏ –ù–∞–¥–∑–æ—Ä–∞

### üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–Ω—è—Ç—å" –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
2. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. ‚è≥ –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä–µ

---

**–î–∞—Ç–∞:** 2025-11-02
**–ê–≤—Ç–æ—Ä:** Claude
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
